# api接口文档
此处依据接口规范，先定义接口的输入与输出，整理好需求，才好按其开发具体的接口函数，按项目来：

## 考勤项目
前缀路由为/attendance，以下为具体请求路径：

* /rec，此为展示记录的接口
输入为字符串，三种时间范围类型：latest/last-week/last-month，分别代表最近一天，最近一周，最近一月;

正常输出为三个字段：打上班卡时间，下班打卡时间，备注，其中前两个为时间类型

* /stat，此为统计数据的接口
输入为字符串，三种时间范围类型：week/month/year，分别代表周，月，年；

输出的内容也是个映射，但键并非固定，而是具体的周，月，年，其中周与月，均带年份，而值，则是相应的工时

* /add，新增考勤记录的接口
输入数据为三组字符串，打上班卡时间，打下班卡时间，以及备注，其中，正常情况下，备注可为空

输出内容为插入时的报错信息，或者提示插入成功的信息，此项因为是增加数据，所以处理异常谨慎，大量内容均为避免脏数据的数据有效性分析代码

## 楚留香新传项目
前缀路由为/crh，以下为具体请求路径：

* /combo，组合技接口
没有输入

输出组合技的编号，所需基础技能及其等级，以及谁用的

* /fighter，武技统一接口
此接口输入分两种模式，一种只输入武功类型，分为内外功两大类：
内功(neigong)只有心法一个子类；而外功(waigong)，分为情侣合技(lover)、怒技(rage)、普通招式(common)、组合技(combo)四个子类， 这种模式下，输出就是此类的武功名称的列表

第二种模式，不只要输入子类，还要输入武功名字，此模式下，输出该武功的基本信息，外加修炼表

两种模式，一组参数解决，有武功名字字段，且不为空，就是查细节，没有，就是查列表

* /item，道具统一接口，包括了武器防具，以及药品、暗器等各种类型
输入道具类型，列出该类物品的列表，道具类型分两大类：

1,武器装备，包括扇、剑、匕首、弓四类武器，盔甲、鞋两类防具，还有佩饰

2,其它道具，包括武功秘籍、丹药、暗器、食物、食材

* /enemy，敌人信息，以类别为参数，male/female/other，三种，返回敌人的信息，部分信息是合并的
* /mission，没有参数，直接返回任务的编号与内容
* /role，也是没有参数，直接返回角色的初始状态的相关信息，比如武功，所带物品等

## 仙剑四项目
前缀路由为/pal4，此项目接口较多，内容也较复杂，12月份再来整合，争取21号前完成

* /equipment，输入为中文版的类型名称，如剑，双剑，琴，头部防具，靴子，佩戴等
* /property，两个参数，大类与子类，输出道具信息
* /prescription是，也是两个参数，输出配方的详细信息
* /question，仙剑问答系列三个问题，参数为系列名，返回该问题的选项与正确答案
* /mission，任务信息，参数就是类型，有**主线、支线、委托**三类
* /magic，仙术，分我方与敌方两类
* /stunt，与仙术类似
* /upgrade，按四大角色列出各自升级信息
* /enemy，分四组字段，展示敌人的全部信息，参数就是分组名

* /pickup，输入为场景编号与区块编号，如（Q04，CN08）等，返回该场景能拾取的物品，以道具为主，少许装备
* /scene，固定分迷宫与城镇两类，列出该类的全部区块的详细信息
* /thing，三级参数，**大类，小类，子类**；列出各子类别的物品名称，包括装备、道具、配方三大类
* /find， 与thing类似，但只有两个参数，一个是大类，一个是具体的物品名称，获得该物品的获取途径

## 思考与补充
发现了一个问题，尽管没影响程序的执行，却影响了程序的可读性-----函数的名称，与变量的名称，重了，后续在程序中，还是要予以注意

* 数据有效性验证，碰到了直接输入0值是否算有效的有趣问题，见下面的文章

https://blog.depa.do/post/gin-validation-errors-handling